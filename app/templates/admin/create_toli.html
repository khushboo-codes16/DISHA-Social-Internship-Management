{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-blue-800 mb-6">Create New Toli</h1>
    
    <form method="POST" enctype="multipart/form-data" class="bg-white p-6 rounded-lg shadow-md">
        {{ form.hidden_tag() }}
        
        <!-- Toli Basic Info -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Toli Number *</label>
                {{ form.toli_no(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                {% if form.toli_no.errors %}
                    <div class="text-red-500 text-sm mt-1">{{ form.toli_no.errors[0] }}</div>
                {% endif %}
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Session Year *</label>
                {{ form.session_year(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                {% if form.session_year.errors %}
                    <div class="text-red-500 text-sm mt-1">{{ form.session_year.errors[0] }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Members Section -->
        <div class="mb-8">
            <h3 class="text-xl font-semibold text-blue-800 mb-4">Add Toli Members (3-4 members required)</h3>
            
            <div class="space-y-6">
                <!-- Member 1 -->
                <div class="border-2 border-blue-200 rounded-lg p-4 bg-blue-50">
                    <h4 class="text-lg font-semibold text-blue-700 mb-3">Member 1 *</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Scholar No -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Scholar Number *</label>
                            {{ form.m1_scholar_no(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        
                        <!-- Name -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Student Name *</label>
                            {{ form.m1_name(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        
                        <!-- Course -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Course *</label>
                            {{ form.m1_course(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        
                        <!-- DOB -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth *</label>
                            {{ form.m1_dob(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        
                        <!-- Contact -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                            {{ form.m1_contact(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        
                        <!-- Email -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                            {{ form.m1_email(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        
                        <!-- Passport Photo -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Passport Photo</label>
                            {{ form.m1_passport_photo(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                    </div>
                </div>

                <!-- Member 2 -->
                <div class="border-2 border-green-200 rounded-lg p-4 bg-green-50">
                    <h4 class="text-lg font-semibold text-green-700 mb-3">Member 2 *</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Scholar Number *</label>
                            {{ form.m2_scholar_no(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Student Name *</label>
                            {{ form.m2_name(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Course *</label>
                            {{ form.m2_course(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth *</label>
                            {{ form.m2_dob(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                            {{ form.m2_contact(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                            {{ form.m2_email(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Passport Photo</label>
                            {{ form.m2_passport_photo(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                    </div>
                </div>

                <!-- Member 3 -->
                <div class="border-2 border-yellow-200 rounded-lg p-4 bg-yellow-50">
                    <h4 class="text-lg font-semibold text-yellow-700 mb-3">Member 3 *</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Scholar Number *</label>
                            {{ form.m3_scholar_no(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Student Name *</label>
                            {{ form.m3_name(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Course *</label>
                            {{ form.m3_course(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth *</label>
                            {{ form.m3_dob(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                            {{ form.m3_contact(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                            {{ form.m3_email(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Passport Photo</label>
                            {{ form.m3_passport_photo(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                    </div>
                </div>

                <!-- Member 4 (Optional) -->
                <div class="border-2 border-purple-200 rounded-lg p-4 bg-purple-50">
                    <h4 class="text-lg font-semibold text-purple-700 mb-3">Member 4 (Optional)</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Scholar Number</label>
                            {{ form.m4_scholar_no(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Student Name</label>
                            {{ form.m4_name(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Course</label>
                            {{ form.m4_course(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
                            {{ form.m4_dob(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number</label>
                            {{ form.m4_contact(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            {{ form.m4_email(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Passport Photo</label>
                            {{ form.m4_passport_photo(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit Buttons -->
        <div class="flex gap-4">
            <button type="submit" name="submit_draft" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                <i class="fas fa-save mr-2"></i>Save as Draft
            </button>
            <button type="submit" name="submit_final" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                <i class="fas fa-paper-plane mr-2"></i>Submit for Approval
            </button>
            <a href="{{ url_for('admin.dashboard') }}" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                <i class="fas fa-times mr-2"></i>Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}