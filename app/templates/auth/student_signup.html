{% extends "base.html" %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-blue-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="mx-auto h-20 w-20 bg-gradient-primary rounded-full flex items-center justify-center shadow-lg">
                <i class="fas fa-user-plus text-white text-2xl"></i>
            </div>
            <h2 class="mt-6 text-3xl font-extrabold text-blue-800">
                Join DISHA Program
            </h2>
            <p class="mt-2 text-sm text-gray-600">
                Create your student account and start your spiritual journey
            </p>
        </div>

        <!-- Signup Form -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border-2 border-yellow-400">
            <form class="space-y-6" method="POST" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Scholar Number -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-id-card mr-2 text-blue-600"></i>
                            Scholar Number *
                        </label>
                        {{ form.scholar_no(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300", placeholder="e.g., 2424385") }}
                        {% if form.scholar_no.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.scholar_no.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Full Name -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-2 text-blue-600"></i>
                            Full Name *
                        </label>
                        {{ form.name(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300", placeholder="Enter your full name") }}
                        {% if form.name.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.name.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Email -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-envelope mr-2 text-blue-600"></i>
                            Email Address *
                        </label>
                        {{ form.email(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300", placeholder="your.email@example.com") }}
                        {% if form.email.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.email.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Date of Birth -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-calendar mr-2 text-blue-600"></i>
                            Date of Birth *
                        </label>
                        {{ form.dob(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300") }}
                        {% if form.dob.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.dob.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Course -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-graduation-cap mr-2 text-blue-600"></i>
                            Course *
                        </label>
                        {{ form.course(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300") }}
                        {% if form.course.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.course.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Contact Number -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-phone mr-2 text-blue-600"></i>
                            Contact Number *
                        </label>
                        {{ form.contact(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300", placeholder="e.g., 9876543210") }}
                        {% if form.contact.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.contact.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Password -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2 text-blue-600"></i>
                            Password *
                        </label>
                        {{ form.password(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300", placeholder="Minimum 8 characters") }}
                        {% if form.password.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.password.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Confirm Password -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2 text-blue-600"></i>
                            Confirm Password *
                        </label>
                        {{ form.confirm_password(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300", placeholder="Re-enter your password") }}
                        {% if form.confirm_password.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.confirm_password.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <!-- Profile Photo -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-camera mr-2 text-blue-600"></i>
                            Profile Photo
                        </label>
                        {{ form.profile_photo(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300") }}
                        <p class="text-xs text-gray-500 mt-1">Upload a passport-size photo (JPG, PNG, GIF)</p>
                        {% if form.profile_photo.errors %}
                            <div class="text-red-500 text-sm mt-2">{{ form.profile_photo.errors[0] }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Terms and Conditions -->
                <div class="flex items-start">
                    {{ form.agree_terms(class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1") }}
                    <label class="ml-2 block text-sm text-gray-900">
                        I agree to the 
                        <a href="#" class="text-blue-600 hover:text-blue-500 font-medium">Terms and Conditions</a>
                        and 
                        <a href="#" class="text-blue-600 hover:text-blue-500 font-medium">Privacy Policy</a>
                    </label>
                </div>
                {% if form.agree_terms.errors %}
                    <div class="text-red-500 text-sm">{{ form.agree_terms.errors[0] }}</div>
                {% endif %}

                <!-- Submit Button -->
                <div>
                    <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-primary hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <i class="fas fa-user-plus mr-2"></i>
                        Create My Account
                    </button>
                </div>
            </form>

            <!-- Login Link -->
            <div class="mt-6 text-center">
                <p class="text-sm text-gray-600">
                    Already have an account? 
                    <a href="{{ url_for('auth.student_login') }}" class="font-medium text-blue-600 hover:text-blue-500 transition-colors duration-300">
                        Sign in here
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Interactive JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Real-time password strength indicator
    const passwordField = document.querySelector('#password');
    const confirmField = document.querySelector('#confirm_password');
    
    if (passwordField) {
        const strengthDiv = document.createElement('div');
        strengthDiv.className = 'text-xs mt-1';
        passwordField.parentElement.appendChild(strengthDiv);

        passwordField.addEventListener('input', function() {
            const password = this.value;
            let strength = 'Weak';
            let color = 'text-red-500';

            if (password.length >= 8) {
                strength = 'Good';
                color = 'text-yellow-500';
            }
            if (password.length >= 12 && /[A-Z]/.test(password) && /[0-9]/.test(password) && /[^A-Za-z0-9]/.test(password)) {
                strength = 'Strong';
                color = 'text-green-500';
            }

            strengthDiv.innerHTML = `Password strength: <span class="${color} font-semibold">${strength}</span>`;
        });

        // Password confirmation match
        if (confirmField) {
            confirmField.addEventListener('input', function() {
                if (passwordField.value !== this.value) {
                    this.classList.add('border-red-300');
                } else {
                    this.classList.remove('border-red-300');
                    this.classList.add('border-green-300');
                }
            });
        }
    }

    // File upload preview
    const fileInput = document.querySelector('input[type="file"]');
    if (fileInput) {
        fileInput.addEventListener('change', function() {
            const fileName = this.files[0]?.name || 'No file chosen';
            const label = this.previousElementSibling;
            label.textContent = `Profile Photo: ${fileName}`;
        });
    }

    // Add focus effects to all inputs
    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('ring-2', 'ring-blue-200', 'rounded-lg');
        });

        input.addEventListener('blur', function() {
            this.parentElement.classList.remove('ring-2', 'ring-blue-200', 'rounded-lg');
        });
    });
});
</script>
{% endblock %}